<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BB QUESTS - LEVEL UP</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Segoe+UI:wght@400;600&display=swap" rel="stylesheet">
</head>
<body class="gamer-theme">

    <div class="app-container">
        <header class="game-header">
            <div class="stats-row">
                <div class="stat-box neon-blue">
                    <span class="material-icons">timer</span>
                    <span id="timer-display">25:00</span>
                    <button id="start-timer" class="btn-icon" title="Iniciar Pomodoro">▶</button>
                </div>
                <div class="stat-box neon-orange">
                    <span class="material-icons">local_fire_department</span>
                    <span id="streak-counter">0</span>
                </div>
                <div class="stat-box neon-green">
                    <span class="material-icons">stars</span>
                    <span id="xp-counter">0</span> XP
                </div>
            </div>
            <div class="xp-bar-container">
                <div class="xp-bar-fill" id="progress-bar"></div>
            </div>
        </header>

        <div class="main-layout">
            <aside class="side-panel">
                <h3 class="neon-text">QUEST LOG (PARETO)</h3>
                <div id="subject-progress-list">
                    </div>
                <button onclick="resetProgress()" class="btn-reset">RESET GAME</button>
            </aside>

            <main>
                <div id="question-card" class="game-card">
                    <div class="card-meta">
                        <span id="subject-tag" class="game-tag">CARREGANDO...</span>
                        <div class="nav-controls">
                             <button id="prev-btn" class="nav-icon-btn" title="Voltar anterior"><span class="material-icons">arrow_back</span></button>
                        </div>
                    </div>
                    
                    <div class="question-body">
                        <p id="question-text">Pressione Start para começar a missão...</p>
                    </div>

                    <div class="options-grid" id="options-container">
                        </div>

                    <div id="feedback-area" class="feedback-overlay hidden">
                        <div class="feedback-content">
                            <h2 id="feedback-status">RESPOSTA</h2>
                            <p id="feedback-message"></p>
                            <button id="next-btn" class="btn-primary" onclick="nextQuestion()">PRÓXIMA FASE</button>
                        </div>
                    </div>
                </div>

                <div class="game-card redação-section" style="margin-top: 30px;">
                    <h3 class="neon-text">MISSÃO: REDAÇÃO (TEMA SURPRESA)</h3>
                    
                    <div class="tema-box" style="background: #222; padding: 15px; border-radius: 8px; border-left: 4px solid var(--secondary); margin-bottom: 15px;">
                        <p id="tema-redacao" style="color: #fff; font-weight: 600; font-size: 1rem; font-family: 'Segoe UI';">Clique abaixo para sortear um tema...</p>
                        <button onclick="sortearTema()" class="btn-small-neon" style="margin-top: 10px; cursor: pointer;">SORTEAR NOVO TEMA</button>
                    </div>

                    <textarea id="redacao-input" placeholder="Desenvolva seu texto dissertativo-argumentativo focado na estrutura nota máxima (Introdução, Desenvolvimento e Conclusão)..." rows="12"></textarea>
                    
                    <button id="avaliar-btn" class="btn-primary" onclick="avaliarRedacao()">ENVIAR PARA AVALIAÇÃO (IA)</button>
                    
                    <div id="redacao-feedback" class="feedback-content hidden" style="margin-top:20px; text-align: left; padding: 15px; border: 1px solid var(--primary); background: #111;">
                        <h4 style="color: var(--primary); font-family: 'Orbitron';">RELATÓRIO DE DESEMPENHO:</h4>
                        <div id="ai-analysis" style="font-family: 'Segoe UI'; font-size: 0.9rem; line-height: 1.6; color: #ddd; white-space: pre-line;"></div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <audio id="sound-correct" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
    <audio id="sound-wrong" src="https://assets.mixkit.co/active_storage/sfx/2020/2020-preview.mp3"></audio>

    <script type="module" src="script.js"></script>
</body>
</html>
